<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi | Beauty Quote and Contract</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mi-primary': '#9b59b6', // Mi's primary color
                        'mi-secondary': '#f3e8ff',
                        'dark-bg': '#2c3e50',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        .container-bg {
            background-color: #f3e8ff;
        }
        .input-style {
            @apply w-full p-3 border border-gray-300 rounded-lg focus:ring-mi-primary focus:border-mi-primary transition duration-200;
        }
    </style>
</head>
<body class="bg-mi-secondary min-h-screen flex items-center justify-center p-4">

    <div class="bg-white p-6 md:p-10 rounded-2xl shadow-2xl w-full max-w-4xl">
        
        <header class="text-center mb-8">
            <h1 class="text-4xl font-extrabold text-mi-primary">Mi - Personalized Quote</h1>
            <p class="text-lg text-gray-600 mt-2">Makeup and Hair Styling for Events and Media.</p>
        </header>

        <!-- Section 1: Service Selection -->
        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">1. Choose Service Type</h2>
            <select id="serviceType" class="input-style bg-white" onchange="updateUI()">
                <option value="wedding">Wedding/Events (Per Service)</option>
                <option value="media">Film/TV/Photoshoot (Hourly)</option>
            </select>
        </section>

        <!-- Section 2A: Wedding Options (Default view) -->
        <section id="weddingOptions" class="mb-8 p-6 border border-mi-primary rounded-xl bg-mi-secondary/50">
            <h2 class="text-2xl font-semibold mb-4 text-mi-primary">Event Details (Wedding/Parties)</h2>
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Number of Makeup Services</label>
                    <input type="number" id="numMakeup" value="1" min="1" class="input-style" oninput="calculateBudget()">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Number of Hairstyles</label>
                    <input type="number" id="numHair" value="1" min="1" class="input-style" oninput="calculateBudget()">
                </div>
            </div>
            <div class="mt-4">
                <label class="flex items-center text-gray-700">
                    <input type="checkbox" id="miAcompanhamento" class="rounded text-mi-primary focus:ring-mi-primary" onchange="calculateBudget()">
                    <span class="ml-2">Request on-site Touch-up/Styling support during the event? (+$500.00)</span>
                </label>
            </div>
            <p id="discountMessage" class="mt-4 text-green-600 font-bold hidden">ðŸŽ‰ 10% Discount applied for 5+ services!</p>
        </section>

        <!-- Section 2B: Media Options (Appears when "Film/TV" is selected) -->
        <section id="mediaOptions" class="mb-8 p-6 border border-mi-primary rounded-xl bg-mi-secondary/50 hidden">
            <h2 class="text-2xl font-semibold mb-4 text-mi-primary">Production Details (Hourly Rate)</h2>
            <label class="block text-sm font-medium text-gray-700 mb-1">Estimated Work Hours (Minimum 4h)</label>
            <input type="number" id="numHours" value="4" min="4" class="input-style" oninput="calculateBudget()">
            <p class="text-sm text-gray-500 mt-2">The standard day rate is $1000.00 for 8 hours, or $150.00 per individual hour. Minimum 4 hours required.</p>
        </section>


        <!-- Section 3: Quote Result -->
        <section class="mb-8 p-6 border-t-2 border-gray-200">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">3. Your Quote</h2>
            <div class="flex justify-between items-center bg-mi-primary text-white p-4 rounded-lg shadow-md">
                <span class="text-xl font-bold">Estimated Total Price:</span>
                <span id="totalPrice" class="text-3xl font-extrabold">$0.00</span>
            </div>
            <p id="baseRate" class="text-sm text-gray-500 mt-2 text-right">Base Rate: $0.00</p>
        </section>
        
        <!-- Section 4: Contract Generation -->
        <section class="mt-8">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">4. Generate Contract Draft</h2>
            <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Your Full Name</label>
                    <input type="text" id="clientName" placeholder="Your Name" class="input-style">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Event/Production Date</label>
                    <input type="date" id="eventDate" class="input-style">
                </div>
            </div>
            <button onclick="generateContract()" class="w-full bg-dark-bg text-white font-semibold py-3 px-6 rounded-lg hover:bg-opacity-90 transition duration-300">
                Generate Contract Draft
            </button>
        </section>

        <!-- Contract Display Section (Modal or Display Area) -->
        <section id="contractDisplay" class="mt-8 p-6 bg-gray-50 border border-gray-200 rounded-xl hidden">
            <h3 class="text-2xl font-bold text-mi-primary mb-4">Service Agreement Draft</h3>
            <pre id="contractText" class="whitespace-pre-wrap text-sm text-gray-700"></pre>
            <button onclick="copyContract()" class="mt-4 bg-mi-primary text-white py-2 px-4 rounded-lg hover:bg-opacity-80 transition duration-300">Copy Contract</button>
            <span id="copyMessage" class="ml-4 text-green-600 font-semibold hidden">Copied!</span>
        </section>
    </div>

    <script>
        // Define rates and discounts (using US dollar values)
        const RATES = {
            wedding: {
                makeup: 350.00,
                hair: 300.00,
                accompany: 500.00, // Extra on-site support
                discountThreshold: 5, // 5 services or more
                discountRate: 0.10, // 10% discount
            },
            media: {
                minHours: 4,
                hourlyRate: 150.00,
                dailyRate: 1000.00, // Day rate for 8 hours
                dailyHours: 8,
            }
        };

        // UI Elements
        const serviceType = document.getElementById('serviceType');
        const weddingOptions = document.getElementById('weddingOptions');
        const mediaOptions = document.getElementById('mediaOptions');
        const numMakeup = document.getElementById('numMakeup');
        const numHair = document.getElementById('numHair');
        const miAcompanhamento = document.getElementById('miAcompanhamento');
        const numHours = document.getElementById('numHours');
        const totalPriceEl = document.getElementById('totalPrice');
        const baseRateEl = document.getElementById('baseRate');
        const discountMessageEl = document.getElementById('discountMessage');
        const contractDisplayEl = document.getElementById('contractDisplay');
        const contractTextEl = document.getElementById('contractText');
        const clientNameInput = document.getElementById('clientName');
        const eventDateInput = document.getElementById('eventDate');

        // Helper function for currency formatting (US locale)
        const formatCurrency = (amount) => `$${amount.toFixed(2)}`;

        // Function to update the UI (hide/show fields)
        function updateUI() {
            const type = serviceType.value;
            if (type === 'wedding') {
                weddingOptions.classList.remove('hidden');
                mediaOptions.classList.add('hidden');
            } else {
                weddingOptions.classList.add('hidden');
                mediaOptions.classList.remove('hidden');
            }
            calculateBudget();
        }

        // Main calculation function
        function calculateBudget() {
            let total = 0;
            let baseRate = 0;
            let discountApplied = false;
            discountMessageEl.classList.add('hidden');

            const type = serviceType.value;

            if (type === 'wedding') {
                const makeupCount = parseInt(numMakeup.value) || 0;
                const hairCount = parseInt(numHair.value) || 0;

                baseRate = (makeupCount * RATES.wedding.makeup) + (hairCount * RATES.wedding.hair);
                total = baseRate;

                // Apply on-site support if checked
                if (miAcompanhamento.checked) {
                    total += RATES.wedding.accompany;
                }

                const totalServices = makeupCount + hairCount;

                // Apply discount for packages (5+ services)
                if (totalServices >= RATES.wedding.discountThreshold) {
                    const servicesValue = baseRate; // Discount is only on service value
                    const discount = servicesValue * RATES.wedding.discountRate;
                    total -= discount;
                    discountApplied = true;
                    discountMessageEl.classList.remove('hidden');
                }

                baseRateEl.textContent = `Base Service Rate: ${formatCurrency(baseRate)}`;

            } else if (type === 'media') {
                let hours = parseInt(numHours.value) || 0;
                
                // Enforce 4-hour minimum
                if (hours < RATES.media.minHours) {
                    hours = RATES.media.minHours;
                    numHours.value = hours; // Update the input field
                }

                // Calculate by day rate if 8 hours or more
                if (hours >= RATES.media.dailyHours) {
                    const numDays = Math.ceil(hours / RATES.media.dailyHours);
                    total = numDays * RATES.media.dailyRate;
                    baseRate = total;
                    baseRateEl.textContent = `Base: ${numDays} day rate(s) of ${RATES.media.dailyHours}h (${formatCurrency(RATES.media.dailyRate)} each)`;
                } else {
                    // Otherwise, charge hourly
                    total = hours * RATES.media.hourlyRate;
                    baseRate = total;
                    baseRateEl.textContent = `Base: ${hours} hour(s) (${formatCurrency(RATES.media.hourlyRate)} per hour)`;
                }
            }

            // Update the total price display
            totalPriceEl.textContent = formatCurrency(total);
        }

        // Function to generate the contract draft
        function generateContract() {
            const finalPrice = totalPriceEl.textContent;
            const clientName = clientNameInput.value.trim();
            const eventDate = eventDateInput.value;
            const service = serviceType.value === 'wedding' ? 'Wedding/Events' : 'Film/TV/Photoshoot (Hourly)';
            
            if (!clientName || !eventDate || finalPrice === '$0.00') {
                // Using a simple custom modal/message for better UX than alert()
                alert('Please fill in your name, date, and define the quote before generating the contract.');
                return;
            }

            let details = '';
            if (serviceType.value === 'wedding') {
                const makeupCount = numMakeup.value;
                const hairCount = numHair.value;
                const onSite = miAcompanhamento.checked ? 'Yes ($500.00)' : 'No';
                const discountMessage = discountMessageEl.classList.contains('hidden') ? 'None' : '10% (5+ service package)';
                
                details = `
Service Details:
  - Type: ${service}
  - Number of Makeup Services: ${makeupCount}
  - Number of Hairstyles: ${hairCount}
  - On-site Touch-up Support: ${onSite}
  - Discount Applied: ${discountMessage}
  - Final Value: ${finalPrice}
`;
            } else {
                const hours = numHours.value;
                details = `
Service Details:
  - Type: ${service}
  - Hours Contracted: ${hours} hours
  - Calculation Basis: ${hours >= RATES.media.dailyHours ? 'Day Rate' : 'Hourly Rate'}
  - Final Value: ${finalPrice}
`;
            }


            const contract = `
BEAUTY SERVICES AGREEMENT (Draft)
_________________________________________________________________

CLIENT: ${clientName}
SERVICE PROVIDER: Mi (SHEGETHER Representative)
SERVICE: Provision of Makeup and Hair Styling services.
EVENT/PRODUCTION DATE: ${eventDate}
LOCATION: To be defined.

1. PURPOSE OF THE AGREEMENT
This agreement covers the provision of beauty services, as detailed below, to be executed by the SERVICE PROVIDER.

2. SERVICE SPECIFICATIONS:
${details}

3. TOTAL VALUE AND PAYMENT METHOD
The total quoted value for the specified services is ${finalPrice}.
Payment Method: To be agreed upon (E.g., 50% upon signing and 50% on the day of the event).

4. OBLIGATIONS OF THE PARTIES
Detailed obligations (scheduling, cancellations, travel, etc.) will be formalized in the final contract. This draft serves only to confirm the quote and selected services.

_________________________         _________________________
CLIENT: ${clientName}             SERVICE PROVIDER: Mi / SHEGETHER
`;
            
            contractTextEl.textContent = contract;
            contractDisplayEl.classList.remove('hidden');
        }

        // Function to copy the contract text to the clipboard
        function copyContract() {
            const textToCopy = contractTextEl.textContent;
            
            // Create a temporary text area element
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = textToCopy;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            try {
                // Copy the text to the clipboard
                document.execCommand('copy');
                
                // Show the success message
                const copyMessageEl = document.getElementById('copyMessage');
                copyMessageEl.classList.remove('hidden');
                setTimeout(() => {
                    copyMessageEl.classList.add('hidden');
                }, 2000);

            } catch (err) {
                console.error('Failed to copy text: ', err);
            } finally {
                // Remove the temporary element
                document.body.removeChild(tempTextArea);
            }
        }

        // Initialize calculation and UI on load
        document.addEventListener('DOMContentLoaded', () => {
            updateUI();
            calculateBudget();
        });
    </script>
</body>
</html>
